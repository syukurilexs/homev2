<form [formGroup]="fg" (submit)="onSubmit()">
  <mat-card>
    <mat-card-header>
      <mat-card-title>{{ title }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="column">
        <!-- Name -->
        <mat-form-field appearance="outline">
          <mat-label>Name</mat-label>
          <input type="text" matInput formControlName="name" />
        </mat-form-field>

        <!-- Mqtt Topic -->
        <mat-form-field appearance="outline">
          <mat-label>Mqtt Topic</mat-label>
          <input type="text" matInput formControlName="topic" />
        </mat-form-field>

        <!-- Remark -->
        <mat-form-field appearance="outline">
          <mat-label>Remark</mat-label>
          <input type="text" matInput formControlName="remark" />
        </mat-form-field>

        <div class="row gap2">
          <!-- Key -->
          <mat-form-field appearance="outline" class="filler">
            <mat-label>Key</mat-label>
            <input type="text" matInput formControlName="key" />
          </mat-form-field>

          <!-- Value -->
          <mat-form-field appearance="outline" class="filler">
            <mat-label>Value</mat-label>
            <input type="text" matInput formControlName="value" />
          </mat-form-field>

          <!-- Add action key value-->
          <button mat-fab type="button" (click)="addSuis()">
            <mat-icon>add</mat-icon>
          </button>
        </div>
        <!-- List of action key value -->
        @if (createActions.length > 0) {
          <mat-card class="box">
            <div class="padding2 column gap1">
              @for (item of createActions; track $index) {
                <div class="row jc-space-between">
                  <div>{{ item.key }} : {{ item.value }}</div>
                  <button
                    type="button"
                    mat-mini-fab
                    (click)="onRemoveAction($index)"
                  >
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
                @if (!$last) {
                  <mat-divider></mat-divider>
                }
              }
            </div>
          </mat-card>
        }
      </div>

      <!-- Action -->
    </mat-card-content>
    <mat-card-actions>
      <div class="full-width row gap2 jc-end">
        <button mat-stroked-button type="button" (click)="onCancel()">
          Cancel
        </button>
        <button mat-flat-button [disabled]="fg.invalid">Submit</button>
      </div>
    </mat-card-actions>
  </mat-card>
</form>
